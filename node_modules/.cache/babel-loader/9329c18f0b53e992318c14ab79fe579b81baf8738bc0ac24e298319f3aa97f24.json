{"ast":null,"code":"import _objectSpread from \"D:/Programming/new/table/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _jsxFileName = \"D:\\\\Programming\\\\new\\\\table\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// src/App.js\nimport React, { useContext, useState, useEffect, useRef } from \"react\";\nimport \"./icons/comment.png\";\nimport printerIcon from \"./icons/printer.png\";\nimport addIcon from \"./icons/add.png\";\nimport searchIcon from \"./icons/search.png\";\nimport { AuthContext } from \"./AuthContext\";\nimport Login from \"./Login\";\nimport { firestore, storage } from \"./firebase\";\nimport { collection, onSnapshot, addDoc, updateDoc, deleteDoc, doc } from \"firebase/firestore\";\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { signOut, updateProfile } from \"firebase/auth\";\nimport { auth } from \"./firebase\";\n\n// Функция для затемнения цвета на заданный процент\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction darkenHex(hex, percent) {\n  hex = hex.replace(/^#/, \"\");\n  if (hex.length === 3) {\n    hex = hex.split(\"\").map(c => c + c).join(\"\");\n  }\n  let num = parseInt(hex, 16);\n  let r = num >> 16 & 0xff;\n  let g = num >> 8 & 0xff;\n  let b = num & 0xff;\n  r = Math.floor(r * (100 - percent) / 100);\n  g = Math.floor(g * (100 - percent) / 100);\n  b = Math.floor(b * (100 - percent) / 100);\n  return \"#\" + [r, g, b].map(x => x.toString(16).padStart(2, \"0\")).join(\"\");\n}\n\n// Подписи для полей\nconst fieldLabels = {\n  orderNo: \"№\",\n  source: \"Джерело\",\n  orderDate: \"Дата від/до\",\n  shippingDate: \"Дата від/до\",\n  item: \"Товар\",\n  description: \"Персоналізація\",\n  size: \"Розмір\",\n  design: \"Дизайн\",\n  message: \"Повідомлення\",\n  recipientInfo: \"Отримувач\",\n  status: \"Статус\",\n  tracking: \"Трекінг\",\n  project: \"Макет\"\n};\n\n// Опции для select-полей\nconst sourceOptions = [\"TABIX\", \"SnugWoodNug\", \"Dreamble\"];\nconst itemOptions = [\"Хотвілс\", \"Кардбокс\", \"Ім'я\", \"Імйя бравл старс\"];\nconst sizeOptions = [\"S\", \"M\", \"L\", \"12inch\", \"15inch\", \"20inch\", \"25inch\", \"30inch\", \"32inch\"];\nconst designOptions = [\"A\", \"B\", \"C\", \"D\", \"E\"];\nconst statusOptions = [\"Чекаю макет\", \"Є макет\", \"Підтверджено\", \"Взято в роботу\", \"Коментар\"];\n\n// Фон строк по статусу\nconst rowBackgroundColors = {\n  \"Чекаю макет\": \"#F5F5F5\",\n  \"Є макет\": \"#F0E6FA\",\n  Підтверджено: \"#E0F7FF\",\n  \"Взято в роботу\": \"#FFDAB3\",\n  Коментар: \"#FFE4E1\"\n};\n\n// Начальное состояние нового заказа\nconst initialOrder = {\n  orderNo: \"\",\n  source: \"TABIX\",\n  orderDate: new Date(),\n  shippingDate: new Date(),\n  customer: \"\",\n  item: \"\",\n  description: \"\",\n  size: \"\",\n  design: \"\",\n  message: [],\n  // Массив объектов { sender, text, read, [avatar] }\n  recipientInfo: \"\",\n  status: \"Чекаю макет\",\n  tracking: \"\",\n  project: \"\"\n};\n\n// Определяем столбцы таблицы; для колонки \"message\" задаём класс \"col-message\"\nconst tableColumns = [{\n  key: \"orderNo\",\n  label: fieldLabels.orderNo,\n  editable: false,\n  className: \"col-order no-print\"\n}, {\n  key: \"source\",\n  label: fieldLabels.source,\n  editable: true,\n  type: \"select\",\n  options: sourceOptions\n}, {\n  key: \"dates\",\n  label: \"Дата від/до\",\n  editable: true,\n  type: \"date\"\n}, {\n  key: \"item\",\n  label: fieldLabels.item,\n  editable: true,\n  type: \"select\",\n  options: itemOptions,\n  className: \"col-item\"\n}, {\n  key: \"description\",\n  label: fieldLabels.description,\n  editable: true\n}, {\n  key: \"size\",\n  label: fieldLabels.size,\n  editable: true,\n  type: \"select\",\n  options: sizeOptions,\n  className: \"col-size\"\n}, {\n  key: \"design\",\n  label: fieldLabels.design,\n  editable: true,\n  type: \"select\",\n  options: designOptions,\n  className: \"col-design\"\n}, {\n  key: \"message\",\n  label: fieldLabels.message,\n  editable: true,\n  type: \"message\",\n  className: \"col-message\"\n}, {\n  key: \"recipientInfo\",\n  label: fieldLabels.recipientInfo,\n  editable: true\n}, {\n  key: \"status\",\n  label: fieldLabels.status,\n  editable: true,\n  type: \"select\",\n  options: statusOptions,\n  className: \"no-print\"\n}, {\n  key: \"tracking\",\n  label: fieldLabels.tracking,\n  editable: true\n}, {\n  key: \"project\",\n  label: fieldLabels.project,\n  editable: true\n}];\nconst statusButtons = [\"Все\", ...statusOptions];\n\n// Константа для placeholder аватара\nconst defaultAvatarUrl = \"https://via.placeholder.com/40\";\nfunction DateInput(_ref) {\n  let {\n    value,\n    onChange,\n    customStyle = {}\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(DatePicker, {\n    selected: value,\n    onChange: onChange,\n    dateFormat: \"MM-dd\",\n    className: \"editing-field no-bg\",\n    wrapperClassName: \"date-picker-wrapper\",\n    onClick: e => e.stopPropagation(),\n    customInput: /*#__PURE__*/_jsxDEV(\"input\", {\n      style: customStyle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 20\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this);\n}\n_c = DateInput;\nfunction AlwaysEditableCell(_ref2) {\n  let {\n    value,\n    onChange,\n    type = \"text\",\n    options,\n    customStyle = {}\n  } = _ref2;\n  if (type === \"date\") {\n    return /*#__PURE__*/_jsxDEV(DateInput, {\n      value: value,\n      onChange: onChange,\n      customStyle: customStyle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this);\n  }\n  if (type === \"select\") {\n    return /*#__PURE__*/_jsxDEV(CustomSelect, {\n      options: options,\n      value: value,\n      onChange: onChange,\n      placeholder: \"\\u041E\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"input\", {\n    type: type,\n    value: value,\n    onChange: e => onChange(e.target.value),\n    onClick: e => e.stopPropagation(),\n    className: \"editing-field\",\n    style: customStyle\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n}\n_c2 = AlwaysEditableCell;\nfunction autoResize(e) {\n  const textarea = e.target;\n  textarea.style.height = \"auto\";\n  textarea.style.height = textarea.scrollHeight + \"px\";\n}\n\n// Компонент для загрузки аватара, расположенный в правом блоке после кнопки \"Вийти\"\nfunction AvatarUploader() {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [hover, setHover] = useState(false);\n  const handleAvatarChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    try {\n      const storageRef = ref(storage, \"avatars/\".concat(user.uid, \"_\").concat(file.name));\n      await uploadBytes(storageRef, file);\n      const downloadURL = await getDownloadURL(storageRef);\n      await updateProfile(user, {\n        photoURL: downloadURL\n      });\n      console.log(\"Аватар обновлен:\", downloadURL);\n    } catch (error) {\n      console.error(\"Ошибка загрузки аватара:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"avatar-container\",\n    onMouseEnter: () => setHover(true),\n    onMouseLeave: () => setHover(false),\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: user.photoURL || defaultAvatarUrl,\n      alt: \"avatar\",\n      className: \"avatar-image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), hover && /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"avatar-upload-label\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: handleAvatarChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this), \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 5\n  }, this);\n}\n_s(AvatarUploader, \"XfQ45hGKGF318Vy7RV1Yu9aAOV0=\");\n_c3 = AvatarUploader;\nfunction AppContent() {\n  _s2();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [data, setData] = useState([]);\n  const [selectedRows, setSelectedRows] = useState([]);\n  const [enlargedImage, setEnlargedImage] = useState(null);\n  const [filters, setFilters] = useState({\n    searchText: \"\",\n    source: \"\",\n    recipientInfo: \"\",\n    status: \"\",\n    tracking: \"\"\n  });\n  const [statusFilter, setStatusFilter] = useState(\"\");\n  const [messageModalData, setMessageModalData] = useState(null);\n  const messageEndRef = useRef(null);\n  useEffect(() => {\n    const ordersCollection = collection(firestore, \"orders\");\n    const unsubscribe = onSnapshot(ordersCollection, snapshot => {\n      const orders = snapshot.docs.map(doc => {\n        var _data$orderDate, _data$shippingDate;\n        const data = doc.data();\n        return _objectSpread(_objectSpread({\n          id: doc.id\n        }, data), {}, {\n          orderDate: (_data$orderDate = data.orderDate) !== null && _data$orderDate !== void 0 && _data$orderDate.toDate ? data.orderDate.toDate() : new Date(data.orderDate),\n          shippingDate: (_data$shippingDate = data.shippingDate) !== null && _data$shippingDate !== void 0 && _data$shippingDate.toDate ? data.shippingDate.toDate() : new Date(data.shippingDate)\n        });\n      });\n      orders.sort((a, b) => b.orderDate - a.orderDate);\n      setData(orders);\n    });\n    return () => unsubscribe();\n  }, []);\n  useEffect(() => {\n    if (messageModalData) {\n      var _messageEndRef$curren;\n      (_messageEndRef$curren = messageEndRef.current) === null || _messageEndRef$curren === void 0 ? void 0 : _messageEndRef$curren.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    }\n  }, [messageModalData === null || messageModalData === void 0 ? void 0 : messageModalData.messages]);\n  const filteredData = data.filter(order => {\n    const searchText = filters.searchText.toLowerCase();\n    const matchSearch = !searchText || order.source.toLowerCase().includes(searchText) || order.recipientInfo && order.recipientInfo.toLowerCase().includes(searchText) || order.tracking && order.tracking.toLowerCase().includes(searchText) || order.description && order.description.toLowerCase().includes(searchText);\n    const matchSource = !filters.source || order.source === filters.source;\n    const matchRecipient = !filters.recipientInfo || order.recipientInfo && order.recipientInfo.toLowerCase().includes(filters.recipientInfo.toLowerCase());\n    const matchStatus = !filters.status || order.status === filters.status;\n    const matchTracking = !filters.tracking || order.tracking && order.tracking.toLowerCase().includes(filters.tracking.toLowerCase());\n    const matchStatusFilter = !statusFilter || order.status === statusFilter;\n    return matchSearch && matchSource && matchRecipient && matchStatus && matchTracking && matchStatusFilter;\n  });\n  const updateCell = async (rowIndex, field, newValue) => {\n    const order = data[rowIndex];\n    if (order && order.id) {\n      const orderRef = doc(firestore, \"orders\", order.id);\n      await updateDoc(orderRef, {\n        [field]: newValue\n      });\n    }\n  };\n  const handleAddRow = async () => {\n    const newOrder = _objectSpread(_objectSpread({}, initialOrder), {}, {\n      isNew: true\n    });\n    const ordersCollection = collection(firestore, \"orders\");\n    await addDoc(ordersCollection, newOrder);\n  };\n  const handleDeleteSelected = async () => {\n    for (let rowIndex of selectedRows) {\n      const order = data[rowIndex];\n      if (order && order.id) {\n        const orderRef = doc(firestore, \"orders\", order.id);\n        try {\n          await deleteDoc(orderRef);\n        } catch (error) {\n          console.error(\"Ошибка при удалении заказа:\", error);\n        }\n      }\n    }\n    setSelectedRows([]);\n  };\n  const toggleRowSelection = rowIndex => {\n    if (selectedRows.includes(rowIndex)) {\n      setSelectedRows(selectedRows.filter(i => i !== rowIndex));\n    } else {\n      setSelectedRows([...selectedRows, rowIndex]);\n    }\n  };\n  const handleFileChange = async (rowIndex, e) => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile) {\n      const fileRef = ref(storage, \"orders/\".concat(Date.now(), \"_\").concat(selectedFile.name));\n      try {\n        await uploadBytes(fileRef, selectedFile);\n        const downloadURL = await getDownloadURL(fileRef);\n        updateCell(rowIndex, \"project\", downloadURL);\n      } catch (error) {\n        console.error(\"Ошибка загрузки файла:\", error);\n      }\n    }\n  };\n  const handleImageClick = (imageUrl, e) => {\n    e.stopPropagation();\n    setEnlargedImage(imageUrl);\n  };\n  const handleCloseEnlargedImage = () => {\n    setEnlargedImage(null);\n  };\n  const resetFilters = () => {\n    setFilters({\n      searchText: \"\",\n      source: \"\",\n      recipientInfo: \"\",\n      status: \"\",\n      tracking: \"\"\n    });\n    setStatusFilter(\"\");\n  };\n  const openMessageModal = (rowIndex, currentMessages) => {\n    const updatedMessages = currentMessages && currentMessages.length > 0 ? currentMessages.map(msg => _objectSpread(_objectSpread({}, msg), {}, {\n      read: true\n    })) : [];\n    updateCell(rowIndex, \"message\", updatedMessages);\n    setMessageModalData({\n      rowIndex,\n      messages: updatedMessages,\n      newMessage: \"\"\n    });\n  };\n  function sendChatMessage() {\n    if (!messageModalData.newMessage || messageModalData.newMessage.trim() === \"\") return;\n    const newMsg = {\n      sender: user.email,\n      text: messageModalData.newMessage,\n      read: false,\n      avatar: user.photoURL || defaultAvatarUrl\n    };\n    const updatedMessages = [...messageModalData.messages, newMsg];\n    updateCell(messageModalData.rowIndex, \"message\", updatedMessages);\n    setMessageModalData(_objectSpread(_objectSpread({}, messageModalData), {}, {\n      messages: updatedMessages,\n      newMessage: \"\"\n    }));\n  }\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(\"Ошибка при выходе:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u0422\\u0430\\u0431\\u043B\\u0438\\u0446\\u044F \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add-order-button\",\n          onClick: handleAddRow,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: addIcon,\n            alt: \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438\",\n            className: \"add-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"print-button\",\n          onClick: () => window.print(),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: printerIcon,\n            alt: \"\\u0414\\u0440\\u0443\\u043A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this), selectedRows.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDeleteSelected,\n          children: [\"\\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438 \\u0432\\u0438\\u0434\\u0456\\u043B\\u0435\\u043D\\u0456 (\", selectedRows.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          children: \"\\u0412\\u0438\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-avatar\",\n          children: /*#__PURE__*/_jsxDEV(AvatarUploader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status-search-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-buttons\",\n        children: statusButtons.map(status => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"status-button \".concat(statusFilter === status ? \"active\" : \"\"),\n          style: {\n            background: status === \"Все\" ? \"#fff\" : rowBackgroundColors[status] || \"#fff\"\n          },\n          onClick: () => {\n            if (status === \"Все\") {\n              setStatusFilter(\"\");\n            } else {\n              setStatusFilter(status);\n            }\n          },\n          children: status\n        }, status, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\u041F\\u043E\\u0448\\u0443\\u043A...\",\n          value: filters.searchText,\n          onChange: e => setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n            searchText: e.target.value\n          })),\n          className: \"search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-icon\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: searchIcon,\n            alt: \"\\u041F\\u043E\\u0448\\u0443\\u043A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"col-order no-print\",\n              onClick: () => toggleRowSelection(0),\n              children: \"\\u0412\\u0438\\u0431\\u0456\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 15\n            }, this), tableColumns.map((col, index) => /*#__PURE__*/_jsxDEV(\"th\", {\n              className: col.className || \"\",\n              style: col.style ? col.style : {},\n              children: col.key === \"dates\" ? \"Дата від/до\" : col.label\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filteredData.map((order, rowIndex) => {\n            const bgColor = order.status ? rowBackgroundColors[order.status] || \"transparent\" : \"transparent\";\n            const inputBorderColor = darkenHex(bgColor, 10);\n            const inputBgColor = darkenHex(bgColor, 3);\n            const cellBorderColor = darkenHex(bgColor, 15);\n            const isSelected = selectedRows.includes(rowIndex);\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"custom-bg \".concat(isSelected ? \"selected\" : \"\"),\n              style: _objectSpread(_objectSpread({}, order.isNew && {\n                animation: \"fadeInUp 0.2s ease-out\"\n              }), {}, {\n                \"--row-bg\": bgColor,\n                \"--input-border\": inputBorderColor,\n                \"--input-bg\": inputBgColor,\n                \"--cell-border\": cellBorderColor,\n                outline: isSelected ? \"1px solid #000\" : \"none\",\n                cursor: \"pointer\"\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                onClick: () => toggleRowSelection(rowIndex),\n                className: \"no-bg no-print\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: isSelected,\n                  onClick: e => e.stopPropagation(),\n                  onChange: () => toggleRowSelection(rowIndex)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 19\n              }, this), tableColumns.map(col => {\n                if (col.key === \"orderNo\") {\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: filteredData.length - rowIndex\n                  }, col.key, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 582,\n                    columnNumber: 25\n                  }, this);\n                } else if (col.key === \"dates\") {\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [/*#__PURE__*/_jsxDEV(DateInput, {\n                      value: order.orderDate,\n                      onChange: date => updateCell(rowIndex, \"orderDate\", date)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 587,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 593,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(DateInput, {\n                      value: order.shippingDate,\n                      onChange: date => updateCell(rowIndex, \"shippingDate\", date)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 594,\n                      columnNumber: 27\n                    }, this)]\n                  }, col.key, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 586,\n                    columnNumber: 25\n                  }, this);\n                } else if (col.key === \"message\") {\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"message-button\",\n                      onClick: e => {\n                        e.stopPropagation();\n                        openMessageModal(rowIndex, order.message);\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: commentIcon,\n                        alt: \"\\u041F\\u043E\\u0432\\u0456\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u043D\\u044F\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 612,\n                        columnNumber: 29\n                      }, this), order.message && (() => {\n                        const currentUserEmail = user === null || user === void 0 ? void 0 : user.email;\n                        const unreadCount = order.message.filter(msg => msg.sender !== currentUserEmail && !msg.read).length;\n                        const indicatorClass = unreadCount > 0 ? \"red-indicator\" : \"green-indicator\";\n                        return /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: indicatorClass,\n                          children: order.message.length\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 625,\n                          columnNumber: 35\n                        }, this);\n                      })()]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 605,\n                      columnNumber: 27\n                    }, this)\n                  }, col.key, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 604,\n                    columnNumber: 25\n                  }, this);\n                } else if (col.key === \"project\") {\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: order.project ? isSelected ? /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"file-button\",\n                      children: [\"Change photo\", /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"file\",\n                        onChange: e => handleFileChange(rowIndex, e),\n                        style: {\n                          display: \"none\"\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 640,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 638,\n                      columnNumber: 31\n                    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: order.project,\n                      alt: \"\\u041C\\u0430\\u043A\\u0435\\u0442\",\n                      style: {\n                        width: \"80px\",\n                        height: \"80px\",\n                        objectFit: \"cover\",\n                        cursor: \"pointer\"\n                      },\n                      onClick: e => handleImageClick(order.project, e)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 649,\n                      columnNumber: 31\n                    }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"file-button\",\n                      children: [\"\\uD83D\\uDDBC\", /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"file\",\n                        onChange: e => handleFileChange(rowIndex, e),\n                        style: {\n                          display: \"none\"\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 666,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 664,\n                      columnNumber: 29\n                    }, this)\n                  }, col.key, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 635,\n                    columnNumber: 25\n                  }, this);\n                } else if (col.editable) {\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: col.className || \"\",\n                    style: col.style ? col.style : {},\n                    children: /*#__PURE__*/_jsxDEV(AlwaysEditableCell, {\n                      value: order[col.key] || \"\",\n                      onChange: newVal => updateCell(rowIndex, col.key, newVal),\n                      type: col.type === \"date\" ? \"date\" : col.type || \"text\",\n                      options: col.options,\n                      customStyle: col.type === \"date\" ? {} : {\n                        backgroundColor: \"var(--input-bg)\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 682,\n                      columnNumber: 27\n                    }, this)\n                  }, col.key, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 677,\n                    columnNumber: 25\n                  }, this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: order[col.key] || \"\"\n                  }, col.key, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 700,\n                    columnNumber: 30\n                  }, this);\n                }\n              })]\n            }, rowIndex, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 7\n    }, this), enlargedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"close\",\n          onClick: handleCloseEnlargedImage,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: enlargedImage,\n          alt: \"\\u0423\\u0432\\u0435\\u043B\\u0438\\u0447\\u0435\\u043D\\u043D\\u043E\\u0435 \\u0444\\u043E\\u0442\\u043E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 711,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 9\n    }, this), messageModalData && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setMessageModalData(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-modal\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-bg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-inner\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-modal-header\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"modal-title\",\n                  children: \"\\u0427\\u0430\\u0442\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 729,\n                  columnNumber: 21\n                }, this), data[messageModalData.rowIndex] && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-subtitle\",\n                  children: [\"\\u0422\\u043E\\u0432\\u0430\\u0440: \", data[messageModalData.rowIndex].item, \" / \\u041F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u0456\\u0437\\u0430\\u0446\\u0456\\u044F:\", \" \", data[messageModalData.rowIndex].description, \" (\\u2116\", \" \", filteredData.length - messageModalData.rowIndex, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 731,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-modal-body\",\n              children: [messageModalData.messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"no-messages\",\n                children: \"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u043F\\u043E\\u0432\\u0456\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 742,\n                columnNumber: 21\n              }, this) :\n              // Рендер сообщений: для всех сообщений выводим аватар только если отправитель – не текущий пользователь\n              messageModalData.messages.map((msg, idx) => {\n                const isCurrent = msg.sender === user.email;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"chat-message-container \".concat(isCurrent ? \"current\" : \"other\"),\n                  style: isCurrent ? {\n                    marginLeft: \"auto\"\n                  } : {},\n                  children: [!isCurrent && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"chat-avatar\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: msg.avatar || defaultAvatarUrl,\n                      alt: \"avatar\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 757,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 756,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"chat-message-bubble\",\n                    children: msg.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 763,\n                    columnNumber: 27\n                  }, this)]\n                }, idx, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 748,\n                  columnNumber: 25\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: messageEndRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 740,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-modal-footer\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"textarea-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                  placeholder: \"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0456\\u0442\\u044C \\u043F\\u043E\\u0432\\u0456\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u043D\\u044F...\",\n                  value: messageModalData.newMessage || \"\",\n                  onChange: e => setMessageModalData(_objectSpread(_objectSpread({}, messageModalData), {}, {\n                    newMessage: e.target.value\n                  })),\n                  onInput: autoResize,\n                  style: {\n                    minHeight: \"40px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 772,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: sendChatMessage,\n                  className: \"send-button\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 784,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 771,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 726,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"close\",\n          onClick: () => setMessageModalData(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 792,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 724,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 720,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 459,\n    columnNumber: 5\n  }, this);\n}\n_s2(AppContent, \"bB+giDNvSx8yC5c14dAOC2PH61Y=\");\n_c4 = AppContent;\nfunction App() {\n  _s3();\n  const {\n    user\n  } = useContext(AuthContext);\n  return user ? /*#__PURE__*/_jsxDEV(AppContent, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 804,\n    columnNumber: 17\n  }, this) : /*#__PURE__*/_jsxDEV(Login, {\n    onLogin: () => {}\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 804,\n    columnNumber: 34\n  }, this);\n}\n_s3(App, \"y3FQDew7UyrSqYkvQcTdCsLbAB8=\");\n_c5 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"DateInput\");\n$RefreshReg$(_c2, \"AlwaysEditableCell\");\n$RefreshReg$(_c3, \"AvatarUploader\");\n$RefreshReg$(_c4, \"AppContent\");\n$RefreshReg$(_c5, \"App\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useRef","printerIcon","addIcon","searchIcon","AuthContext","Login","firestore","storage","collection","onSnapshot","addDoc","updateDoc","deleteDoc","doc","ref","uploadBytes","getDownloadURL","signOut","updateProfile","auth","jsxDEV","_jsxDEV","darkenHex","hex","percent","replace","length","split","map","c","join","num","parseInt","r","g","b","Math","floor","x","toString","padStart","fieldLabels","orderNo","source","orderDate","shippingDate","item","description","size","design","message","recipientInfo","status","tracking","project","sourceOptions","itemOptions","sizeOptions","designOptions","statusOptions","rowBackgroundColors","Підтверджено","Коментар","initialOrder","Date","customer","tableColumns","key","label","editable","className","type","options","statusButtons","defaultAvatarUrl","DateInput","_ref","value","onChange","customStyle","DatePicker","selected","dateFormat","wrapperClassName","onClick","e","stopPropagation","customInput","style","fileName","_jsxFileName","lineNumber","columnNumber","_c","AlwaysEditableCell","_ref2","CustomSelect","placeholder","target","_c2","autoResize","textarea","height","scrollHeight","AvatarUploader","_s","user","hover","setHover","handleAvatarChange","file","files","storageRef","concat","uid","name","downloadURL","photoURL","console","log","error","onMouseEnter","onMouseLeave","children","src","alt","accept","_c3","AppContent","_s2","data","setData","selectedRows","setSelectedRows","enlargedImage","setEnlargedImage","filters","setFilters","searchText","statusFilter","setStatusFilter","messageModalData","setMessageModalData","messageEndRef","ordersCollection","unsubscribe","snapshot","orders","docs","_data$orderDate","_data$shippingDate","_objectSpread","id","toDate","sort","a","_messageEndRef$curren","current","scrollIntoView","behavior","messages","filteredData","filter","order","toLowerCase","matchSearch","includes","matchSource","matchRecipient","matchStatus","matchTracking","matchStatusFilter","updateCell","rowIndex","field","newValue","orderRef","handleAddRow","newOrder","isNew","handleDeleteSelected","toggleRowSelection","i","handleFileChange","selectedFile","fileRef","now","handleImageClick","imageUrl","handleCloseEnlargedImage","resetFilters","openMessageModal","currentMessages","updatedMessages","msg","read","newMessage","sendChatMessage","trim","newMsg","sender","email","text","avatar","handleLogout","window","print","background","col","index","bgColor","inputBorderColor","inputBgColor","cellBorderColor","isSelected","animation","outline","cursor","checked","date","commentIcon","currentUserEmail","unreadCount","indicatorClass","display","width","objectFit","newVal","backgroundColor","idx","isCurrent","marginLeft","onInput","minHeight","_c4","App","_s3","onLogin","_c5","$RefreshReg$"],"sources":["D:/Programming/new/table/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useContext, useState, useEffect, useRef } from \"react\";\nimport \"./icons/comment.png\";\nimport printerIcon from \"./icons/printer.png\";\nimport addIcon from \"./icons/add.png\";\nimport searchIcon from \"./icons/search.png\";\nimport { AuthContext } from \"./AuthContext\";\nimport Login from \"./Login\";\nimport { firestore, storage } from \"./firebase\";\nimport {\n  collection,\n  onSnapshot,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  doc,\n} from \"firebase/firestore\";\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { signOut, updateProfile } from \"firebase/auth\";\nimport { auth } from \"./firebase\";\n\n// Функция для затемнения цвета на заданный процент\nfunction darkenHex(hex, percent) {\n  hex = hex.replace(/^#/, \"\");\n  if (hex.length === 3) {\n    hex = hex\n      .split(\"\")\n      .map((c) => c + c)\n      .join(\"\");\n  }\n  let num = parseInt(hex, 16);\n  let r = (num >> 16) & 0xff;\n  let g = (num >> 8) & 0xff;\n  let b = num & 0xff;\n  r = Math.floor((r * (100 - percent)) / 100);\n  g = Math.floor((g * (100 - percent)) / 100);\n  b = Math.floor((b * (100 - percent)) / 100);\n  return \"#\" + [r, g, b].map((x) => x.toString(16).padStart(2, \"0\")).join(\"\");\n}\n\n// Подписи для полей\nconst fieldLabels = {\n  orderNo: \"№\",\n  source: \"Джерело\",\n  orderDate: \"Дата від/до\",\n  shippingDate: \"Дата від/до\",\n  item: \"Товар\",\n  description: \"Персоналізація\",\n  size: \"Розмір\",\n  design: \"Дизайн\",\n  message: \"Повідомлення\",\n  recipientInfo: \"Отримувач\",\n  status: \"Статус\",\n  tracking: \"Трекінг\",\n  project: \"Макет\",\n};\n\n// Опции для select-полей\nconst sourceOptions = [\"TABIX\", \"SnugWoodNug\", \"Dreamble\"];\nconst itemOptions = [\"Хотвілс\", \"Кардбокс\", \"Ім'я\", \"Імйя бравл старс\"];\nconst sizeOptions = [\n  \"S\",\n  \"M\",\n  \"L\",\n  \"12inch\",\n  \"15inch\",\n  \"20inch\",\n  \"25inch\",\n  \"30inch\",\n  \"32inch\",\n];\nconst designOptions = [\"A\", \"B\", \"C\", \"D\", \"E\"];\nconst statusOptions = [\n  \"Чекаю макет\",\n  \"Є макет\",\n  \"Підтверджено\",\n  \"Взято в роботу\",\n  \"Коментар\",\n];\n\n// Фон строк по статусу\nconst rowBackgroundColors = {\n  \"Чекаю макет\": \"#F5F5F5\",\n  \"Є макет\": \"#F0E6FA\",\n  Підтверджено: \"#E0F7FF\",\n  \"Взято в роботу\": \"#FFDAB3\",\n  Коментар: \"#FFE4E1\",\n};\n\n// Начальное состояние нового заказа\nconst initialOrder = {\n  orderNo: \"\",\n  source: \"TABIX\",\n  orderDate: new Date(),\n  shippingDate: new Date(),\n  customer: \"\",\n  item: \"\",\n  description: \"\",\n  size: \"\",\n  design: \"\",\n  message: [], // Массив объектов { sender, text, read, [avatar] }\n  recipientInfo: \"\",\n  status: \"Чекаю макет\",\n  tracking: \"\",\n  project: \"\",\n};\n\n// Определяем столбцы таблицы; для колонки \"message\" задаём класс \"col-message\"\nconst tableColumns = [\n  {\n    key: \"orderNo\",\n    label: fieldLabels.orderNo,\n    editable: false,\n    className: \"col-order no-print\",\n  },\n  {\n    key: \"source\",\n    label: fieldLabels.source,\n    editable: true,\n    type: \"select\",\n    options: sourceOptions,\n  },\n  { key: \"dates\", label: \"Дата від/до\", editable: true, type: \"date\" },\n  {\n    key: \"item\",\n    label: fieldLabels.item,\n    editable: true,\n    type: \"select\",\n    options: itemOptions,\n    className: \"col-item\",\n  },\n  { key: \"description\", label: fieldLabels.description, editable: true },\n  {\n    key: \"size\",\n    label: fieldLabels.size,\n    editable: true,\n    type: \"select\",\n    options: sizeOptions,\n    className: \"col-size\",\n  },\n  {\n    key: \"design\",\n    label: fieldLabels.design,\n    editable: true,\n    type: \"select\",\n    options: designOptions,\n    className: \"col-design\",\n  },\n  {\n    key: \"message\",\n    label: fieldLabels.message,\n    editable: true,\n    type: \"message\",\n    className: \"col-message\",\n  },\n  { key: \"recipientInfo\", label: fieldLabels.recipientInfo, editable: true },\n  {\n    key: \"status\",\n    label: fieldLabels.status,\n    editable: true,\n    type: \"select\",\n    options: statusOptions,\n    className: \"no-print\",\n  },\n  { key: \"tracking\", label: fieldLabels.tracking, editable: true },\n  { key: \"project\", label: fieldLabels.project, editable: true },\n];\n\nconst statusButtons = [\"Все\", ...statusOptions];\n\n// Константа для placeholder аватара\nconst defaultAvatarUrl = \"https://via.placeholder.com/40\";\n\nfunction DateInput({ value, onChange, customStyle = {} }) {\n  return (\n    <DatePicker\n      selected={value}\n      onChange={onChange}\n      dateFormat=\"MM-dd\"\n      className=\"editing-field no-bg\"\n      wrapperClassName=\"date-picker-wrapper\"\n      onClick={(e) => e.stopPropagation()}\n      customInput={<input style={customStyle} />}\n    />\n  );\n}\n\nfunction AlwaysEditableCell({\n  value,\n  onChange,\n  type = \"text\",\n  options,\n  customStyle = {},\n}) {\n  if (type === \"date\") {\n    return (\n      <DateInput value={value} onChange={onChange} customStyle={customStyle} />\n    );\n  }\n  if (type === \"select\") {\n    return (\n      <CustomSelect\n        options={options}\n        value={value}\n        onChange={onChange}\n        placeholder=\"Оберіть...\"\n      />\n    );\n  }\n  return (\n    <input\n      type={type}\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n      onClick={(e) => e.stopPropagation()}\n      className=\"editing-field\"\n      style={customStyle}\n    />\n  );\n}\n\nfunction autoResize(e) {\n  const textarea = e.target;\n  textarea.style.height = \"auto\";\n  textarea.style.height = textarea.scrollHeight + \"px\";\n}\n\n// Компонент для загрузки аватара, расположенный в правом блоке после кнопки \"Вийти\"\nfunction AvatarUploader() {\n  const { user } = useContext(AuthContext);\n  const [hover, setHover] = useState(false);\n\n  const handleAvatarChange = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    try {\n      const storageRef = ref(storage, `avatars/${user.uid}_${file.name}`);\n      await uploadBytes(storageRef, file);\n      const downloadURL = await getDownloadURL(storageRef);\n      await updateProfile(user, { photoURL: downloadURL });\n      console.log(\"Аватар обновлен:\", downloadURL);\n    } catch (error) {\n      console.error(\"Ошибка загрузки аватара:\", error);\n    }\n  };\n\n  return (\n    <div\n      className=\"avatar-container\"\n      onMouseEnter={() => setHover(true)}\n      onMouseLeave={() => setHover(false)}\n    >\n      <img\n        src={user.photoURL || defaultAvatarUrl}\n        alt=\"avatar\"\n        className=\"avatar-image\"\n      />\n      {hover && (\n        <label className=\"avatar-upload-label\">\n          <input type=\"file\" accept=\"image/*\" onChange={handleAvatarChange} />\n          Загрузить\n        </label>\n      )}\n    </div>\n  );\n}\n\nfunction AppContent() {\n  const { user } = useContext(AuthContext);\n  const [data, setData] = useState([]);\n  const [selectedRows, setSelectedRows] = useState([]);\n  const [enlargedImage, setEnlargedImage] = useState(null);\n  const [filters, setFilters] = useState({\n    searchText: \"\",\n    source: \"\",\n    recipientInfo: \"\",\n    status: \"\",\n    tracking: \"\",\n  });\n  const [statusFilter, setStatusFilter] = useState(\"\");\n  const [messageModalData, setMessageModalData] = useState(null);\n  const messageEndRef = useRef(null);\n\n  useEffect(() => {\n    const ordersCollection = collection(firestore, \"orders\");\n    const unsubscribe = onSnapshot(ordersCollection, (snapshot) => {\n      const orders = snapshot.docs.map((doc) => {\n        const data = doc.data();\n        return {\n          id: doc.id,\n          ...data,\n          orderDate: data.orderDate?.toDate\n            ? data.orderDate.toDate()\n            : new Date(data.orderDate),\n          shippingDate: data.shippingDate?.toDate\n            ? data.shippingDate.toDate()\n            : new Date(data.shippingDate),\n        };\n      });\n      orders.sort((a, b) => b.orderDate - a.orderDate);\n      setData(orders);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    if (messageModalData) {\n      messageEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [messageModalData?.messages]);\n\n  const filteredData = data.filter((order) => {\n    const searchText = filters.searchText.toLowerCase();\n    const matchSearch =\n      !searchText ||\n      order.source.toLowerCase().includes(searchText) ||\n      (order.recipientInfo &&\n        order.recipientInfo.toLowerCase().includes(searchText)) ||\n      (order.tracking && order.tracking.toLowerCase().includes(searchText)) ||\n      (order.description &&\n        order.description.toLowerCase().includes(searchText));\n    const matchSource = !filters.source || order.source === filters.source;\n    const matchRecipient =\n      !filters.recipientInfo ||\n      (order.recipientInfo &&\n        order.recipientInfo\n          .toLowerCase()\n          .includes(filters.recipientInfo.toLowerCase()));\n    const matchStatus = !filters.status || order.status === filters.status;\n    const matchTracking =\n      !filters.tracking ||\n      (order.tracking &&\n        order.tracking.toLowerCase().includes(filters.tracking.toLowerCase()));\n    const matchStatusFilter = !statusFilter || order.status === statusFilter;\n    return (\n      matchSearch &&\n      matchSource &&\n      matchRecipient &&\n      matchStatus &&\n      matchTracking &&\n      matchStatusFilter\n    );\n  });\n\n  const updateCell = async (rowIndex, field, newValue) => {\n    const order = data[rowIndex];\n    if (order && order.id) {\n      const orderRef = doc(firestore, \"orders\", order.id);\n      await updateDoc(orderRef, { [field]: newValue });\n    }\n  };\n\n  const handleAddRow = async () => {\n    const newOrder = { ...initialOrder, isNew: true };\n    const ordersCollection = collection(firestore, \"orders\");\n    await addDoc(ordersCollection, newOrder);\n  };\n\n  const handleDeleteSelected = async () => {\n    for (let rowIndex of selectedRows) {\n      const order = data[rowIndex];\n      if (order && order.id) {\n        const orderRef = doc(firestore, \"orders\", order.id);\n        try {\n          await deleteDoc(orderRef);\n        } catch (error) {\n          console.error(\"Ошибка при удалении заказа:\", error);\n        }\n      }\n    }\n    setSelectedRows([]);\n  };\n\n  const toggleRowSelection = (rowIndex) => {\n    if (selectedRows.includes(rowIndex)) {\n      setSelectedRows(selectedRows.filter((i) => i !== rowIndex));\n    } else {\n      setSelectedRows([...selectedRows, rowIndex]);\n    }\n  };\n\n  const handleFileChange = async (rowIndex, e) => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile) {\n      const fileRef = ref(storage, `orders/${Date.now()}_${selectedFile.name}`);\n      try {\n        await uploadBytes(fileRef, selectedFile);\n        const downloadURL = await getDownloadURL(fileRef);\n        updateCell(rowIndex, \"project\", downloadURL);\n      } catch (error) {\n        console.error(\"Ошибка загрузки файла:\", error);\n      }\n    }\n  };\n\n  const handleImageClick = (imageUrl, e) => {\n    e.stopPropagation();\n    setEnlargedImage(imageUrl);\n  };\n\n  const handleCloseEnlargedImage = () => {\n    setEnlargedImage(null);\n  };\n\n  const resetFilters = () => {\n    setFilters({\n      searchText: \"\",\n      source: \"\",\n      recipientInfo: \"\",\n      status: \"\",\n      tracking: \"\",\n    });\n    setStatusFilter(\"\");\n  };\n\n  const openMessageModal = (rowIndex, currentMessages) => {\n    const updatedMessages =\n      currentMessages && currentMessages.length > 0\n        ? currentMessages.map((msg) => ({ ...msg, read: true }))\n        : [];\n    updateCell(rowIndex, \"message\", updatedMessages);\n    setMessageModalData({\n      rowIndex,\n      messages: updatedMessages,\n      newMessage: \"\",\n    });\n  };\n\n  function sendChatMessage() {\n    if (\n      !messageModalData.newMessage ||\n      messageModalData.newMessage.trim() === \"\"\n    )\n      return;\n    const newMsg = {\n      sender: user.email,\n      text: messageModalData.newMessage,\n      read: false,\n      avatar: user.photoURL || defaultAvatarUrl,\n    };\n    const updatedMessages = [...messageModalData.messages, newMsg];\n    updateCell(messageModalData.rowIndex, \"message\", updatedMessages);\n    setMessageModalData({\n      ...messageModalData,\n      messages: updatedMessages,\n      newMessage: \"\",\n    });\n  }\n\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(\"Ошибка при выходе:\", error);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Таблиця замовленнь</h1>\n      <div className=\"top-controls\">\n        <div className=\"left-controls\">\n          <button className=\"add-order-button\" onClick={handleAddRow}>\n            <img src={addIcon} alt=\"Додати\" className=\"add-icon\" />\n            <span>Додати замовлення</span>\n          </button>\n          <button className=\"print-button\" onClick={() => window.print()}>\n            <img src={printerIcon} alt=\"Друк\" />\n          </button>\n          {selectedRows.length > 0 && (\n            <button onClick={handleDeleteSelected}>\n              Видалити виділені ({selectedRows.length})\n            </button>\n          )}\n        </div>\n        <div className=\"right-controls\">\n          <button onClick={handleLogout}>Вийти</button>\n          <div className=\"right-avatar\">\n            <AvatarUploader />\n          </div>\n        </div>\n      </div>\n      <div className=\"status-search-row\">\n        <div className=\"status-buttons\">\n          {statusButtons.map((status) => (\n            <button\n              key={status}\n              className={`status-button ${\n                statusFilter === status ? \"active\" : \"\"\n              }`}\n              style={{\n                background:\n                  status === \"Все\"\n                    ? \"#fff\"\n                    : rowBackgroundColors[status] || \"#fff\",\n              }}\n              onClick={() => {\n                if (status === \"Все\") {\n                  setStatusFilter(\"\");\n                } else {\n                  setStatusFilter(status);\n                }\n              }}\n            >\n              {status}\n            </button>\n          ))}\n        </div>\n        <div className=\"search-container\">\n          <input\n            type=\"text\"\n            placeholder=\"Пошук...\"\n            value={filters.searchText}\n            onChange={(e) =>\n              setFilters({ ...filters, searchText: e.target.value })\n            }\n            className=\"search-input\"\n          />\n          <div className=\"search-icon\">\n            <img src={searchIcon} alt=\"Пошук\" />\n          </div>\n        </div>\n      </div>\n      <div className=\"table-wrapper\">\n        <table>\n          <thead>\n            <tr>\n              <th\n                className=\"col-order no-print\"\n                onClick={() => toggleRowSelection(0)}\n              >\n                Вибір\n              </th>\n              {tableColumns.map((col, index) => (\n                <th\n                  key={index}\n                  className={col.className || \"\"}\n                  style={col.style ? col.style : {}}\n                >\n                  {col.key === \"dates\" ? \"Дата від/до\" : col.label}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {filteredData.map((order, rowIndex) => {\n              const bgColor = order.status\n                ? rowBackgroundColors[order.status] || \"transparent\"\n                : \"transparent\";\n              const inputBorderColor = darkenHex(bgColor, 10);\n              const inputBgColor = darkenHex(bgColor, 3);\n              const cellBorderColor = darkenHex(bgColor, 15);\n              const isSelected = selectedRows.includes(rowIndex);\n              return (\n                <tr\n                  key={rowIndex}\n                  className={`custom-bg ${isSelected ? \"selected\" : \"\"}`}\n                  style={{\n                    ...(order.isNew && { animation: \"fadeInUp 0.2s ease-out\" }),\n                    \"--row-bg\": bgColor,\n                    \"--input-border\": inputBorderColor,\n                    \"--input-bg\": inputBgColor,\n                    \"--cell-border\": cellBorderColor,\n                    outline: isSelected ? \"1px solid #000\" : \"none\",\n                    cursor: \"pointer\",\n                  }}\n                >\n                  <td\n                    onClick={() => toggleRowSelection(rowIndex)}\n                    className=\"no-bg no-print\"\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={isSelected}\n                      onClick={(e) => e.stopPropagation()}\n                      onChange={() => toggleRowSelection(rowIndex)}\n                    />\n                  </td>\n                  {tableColumns.map((col) => {\n                    if (col.key === \"orderNo\") {\n                      return (\n                        <td key={col.key}>{filteredData.length - rowIndex}</td>\n                      );\n                    } else if (col.key === \"dates\") {\n                      return (\n                        <td key={col.key}>\n                          <DateInput\n                            value={order.orderDate}\n                            onChange={(date) =>\n                              updateCell(rowIndex, \"orderDate\", date)\n                            }\n                          />\n                          <br />\n                          <DateInput\n                            value={order.shippingDate}\n                            onChange={(date) =>\n                              updateCell(rowIndex, \"shippingDate\", date)\n                            }\n                          />\n                        </td>\n                      );\n                    } else if (col.key === \"message\") {\n                      return (\n                        <td key={col.key}>\n                          <button\n                            className=\"message-button\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              openMessageModal(rowIndex, order.message);\n                            }}\n                          >\n                            <img src={commentIcon} alt=\"Повідомлення\" />\n                            {order.message &&\n                              (() => {\n                                const currentUserEmail = user?.email;\n                                const unreadCount = order.message.filter(\n                                  (msg) =>\n                                    msg.sender !== currentUserEmail && !msg.read\n                                ).length;\n                                const indicatorClass =\n                                  unreadCount > 0\n                                    ? \"red-indicator\"\n                                    : \"green-indicator\";\n                                return (\n                                  <span className={indicatorClass}>\n                                    {order.message.length}\n                                  </span>\n                                );\n                              })()}\n                          </button>\n                        </td>\n                      );\n                    } else if (col.key === \"project\") {\n                      return (\n                        <td key={col.key}>\n                          {order.project ? (\n                            isSelected ? (\n                              <label className=\"file-button\">\n                                Change photo\n                                <input\n                                  type=\"file\"\n                                  onChange={(e) =>\n                                    handleFileChange(rowIndex, e)\n                                  }\n                                  style={{ display: \"none\" }}\n                                />\n                              </label>\n                            ) : (\n                              <img\n                                src={order.project}\n                                alt=\"Макет\"\n                                style={{\n                                  width: \"80px\",\n                                  height: \"80px\",\n                                  objectFit: \"cover\",\n                                  cursor: \"pointer\",\n                                }}\n                                onClick={(e) =>\n                                  handleImageClick(order.project, e)\n                                }\n                              />\n                            )\n                          ) : (\n                            <label className=\"file-button\">\n                              🖼\n                              <input\n                                type=\"file\"\n                                onChange={(e) => handleFileChange(rowIndex, e)}\n                                style={{ display: \"none\" }}\n                              />\n                            </label>\n                          )}\n                        </td>\n                      );\n                    } else if (col.editable) {\n                      return (\n                        <td\n                          key={col.key}\n                          className={col.className || \"\"}\n                          style={col.style ? col.style : {}}\n                        >\n                          <AlwaysEditableCell\n                            value={order[col.key] || \"\"}\n                            onChange={(newVal) =>\n                              updateCell(rowIndex, col.key, newVal)\n                            }\n                            type={\n                              col.type === \"date\" ? \"date\" : col.type || \"text\"\n                            }\n                            options={col.options}\n                            customStyle={\n                              col.type === \"date\"\n                                ? {}\n                                : { backgroundColor: \"var(--input-bg)\" }\n                            }\n                          />\n                        </td>\n                      );\n                    } else {\n                      return <td key={col.key}>{order[col.key] || \"\"}</td>;\n                    }\n                  })}\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n      {enlargedImage && (\n        <div className=\"image-modal\">\n          <div className=\"image-modal-content\">\n            <span className=\"close\" onClick={handleCloseEnlargedImage}>\n              &times;\n            </span>\n            <img src={enlargedImage} alt=\"Увеличенное фото\" />\n          </div>\n        </div>\n      )}\n      {messageModalData && (\n        <div\n          className=\"modal-overlay\"\n          onClick={() => setMessageModalData(null)}\n        >\n          <div className=\"message-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-bg\">\n              <div className=\"modal-inner\">\n                <div className=\"message-modal-header\">\n                  <div>\n                    <span className=\"modal-title\">Чат</span>\n                    {data[messageModalData.rowIndex] && (\n                      <div className=\"modal-subtitle\">\n                        Товар: {data[messageModalData.rowIndex].item} /\n                        Персоналізація:{\" \"}\n                        {data[messageModalData.rowIndex].description} (№{\" \"}\n                        {filteredData.length - messageModalData.rowIndex})\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <div className=\"message-modal-body\">\n                  {messageModalData.messages.length === 0 ? (\n                    <div className=\"no-messages\">Немає повідомлень</div>\n                  ) : (\n                    // Рендер сообщений: для всех сообщений выводим аватар только если отправитель – не текущий пользователь\n                    messageModalData.messages.map((msg, idx) => {\n                      const isCurrent = msg.sender === user.email;\n                      return (\n                        <div\n                          key={idx}\n                          className={`chat-message-container ${\n                            isCurrent ? \"current\" : \"other\"\n                          }`}\n                          style={isCurrent ? { marginLeft: \"auto\" } : {}}\n                        >\n                          {!isCurrent && (\n                            <div className=\"chat-avatar\">\n                              <img\n                                src={msg.avatar || defaultAvatarUrl}\n                                alt=\"avatar\"\n                              />\n                            </div>\n                          )}\n                          <div className=\"chat-message-bubble\">{msg.text}</div>\n                        </div>\n                      );\n                    })\n                  )}\n                  <div ref={messageEndRef} />\n                </div>\n                <div className=\"message-modal-footer\">\n                  <div className=\"textarea-container\">\n                    <textarea\n                      placeholder=\"Напишіть повідомлення...\"\n                      value={messageModalData.newMessage || \"\"}\n                      onChange={(e) =>\n                        setMessageModalData({\n                          ...messageModalData,\n                          newMessage: e.target.value,\n                        })\n                      }\n                      onInput={autoResize}\n                      style={{ minHeight: \"40px\" }}\n                    />\n                    <button\n                      onClick={sendChatMessage}\n                      className=\"send-button\"\n                    ></button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <span className=\"close\" onClick={() => setMessageModalData(null)}>\n              &times;\n            </span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction App() {\n  const { user } = useContext(AuthContext);\n  return user ? <AppContent /> : <Login onLogin={() => {}} />;\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}